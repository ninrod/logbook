* command line install
** BIOS
*** disable secure boot on bios
*** TPM error (6)
    - had to disable the security chip in the thinkpad BIOS
*** enable intel virtualization on thinkpad
** create USB bootable pendrive
*** In MacOS

#+BEGIN_SRC sh
# in macos
diskutil list
diskutil unmountDisk /dev/diskX
# notice the 'r' before 'disk' for raw mode which makes the transfer much faster:
dd bs=4M if=/path/to/archlinux.iso of=/dev/rdiskX status=progress && sync
# After completion, macOS may complain that "The disk you inserted was not readable by this computer".
# Select 'Ignore'. The USB device will be bootable.
#+END_SRC

** partitioning

- had to use gdisk to get a GPT/UEFI partition table
- used a / and a /boot and a swap partition
- the / had to be ext4 formated (mounted on /mnt)
- the /boot had to be vfat formated (mounted on /mnt/boot)

** reFind bootloader

 - had to manually edit the refind_linux.conf
 #+BEGIN_SRC sh
 "boot with std options" "root=/dev/nvme0n1p3 rw add_efi_memmap"
 ...
 #+END_SRC
* keyboard
** fix lang
1. verify that you are not setting =$LANG= manually
2. uncomment pt_BR.UTF-8 in /etc/locale.gen
3. run =locale-gen=
4. certify that pt_BR is installed: run =localectl list-locales=
5. now install pt_BR: localectl set-locale LANG=pt_BR.UTF-8
6. reboot and login
** fix virtual console
   #+BEGIN_SRC sh
   echo "KEYMAP=us-acentos" > /etc/vconsole.conf
   #+END_SRC
** fix layout
*** without klfc
**** fix layout

   - with help from [[https://wiki.archlinux.org/index.php/Keyboard_configuration_in_Xorg#Setting_keyboard_layout][arch wiki]]
   #+BEGIN_SRC sh
     localectl set-x11-keymap us pc104 intl
   #+END_SRC

**** fix cedilha in US-international with deadkeys
***** if using en_US.UTF-8 as lang

    - stolen from: [[https://gist.github.com/ninrod/a29a99a20e695ba1a2ce7e774803a501][here]]
    #+BEGIN_SRC txt
    Author: Nilo Dantas - n1lo
    Based on: https://bugs.launchpad.net/ubuntu/+source/ibus/+bug/518056 - helio-valente post

    How to use Cedilha on US Keyboard on ArchLinux

    1) Put: English(US, internacional with dead Keys) on your system keyboard layout.
    2) Editing the files:
    sudo vim /usr/lib/gtk-3.0/3.0.0/immodules.cache
    sudo vim /usr/lib/gtk-2.0/2.10.0/immodules.cache

    changing the line

    "cedilla" "Cedilla" "gtk20" "/usr/share/locale" "az:ca:co:fr:gv:oc:pt:sq:tr:wa"
    to
    "cedilla" "Cedilla" "gtk20" "/usr/share/locale" "az:ca:co:fr:gv:oc:pt:sq:tr:wa:en"

    3) replacing "ć" to "ç" and "Ć" to "Ç" on /usr/share/X11/locale/en_US.UTF-8/Compose

    sudo cp /usr/share/X11/locale/en_US.UTF-8/Compose /usr/share/X11/locale/en_US.UTF-8/Compose.bak
    sed 's/ć/ç/g' < /usr/share/X11/locale/en_US.UTF-8/Compose | sed 's/Ć/Ç/g' > Compose
    sudo mv Compose /usr/share/X11/locale/en_US.UTF-8/Compose

    4) add two lines on /etc/environment

    GTK_IM_MODULE=cedilla
    QT_IM_MODULE=cedilla

    5)restart your computer
    #+END_SRC
***** if using pt_BR.UTF-8 as lang
      - no need to do anything
*** with klfc
    1. run the build script and execute the generated install
    2. add these lines to =/etc/environment=

#+BEGIN_SRC sh
GTK_IM_MODULE=cedilla
QT_IM_MODULE=cedilla
#+END_SRC

* hosts file
  - [[https://www.reddit.com/r/archlinux/comments/6llvgv/chromium_taking_a_long_ass_time_to_load_up/djuuq0r/][fix hosts file]]
* wifi / networking
  - =netctl enable profile= to permanent add your profile
* pacman

- search for a package?
#+BEGIN_SRC sh
$ pacman -Ss $package
#+END_SRC
* pacaur
  - install from AUR.
* sudo without a password

- stolen from here: [[https://bbs.archlinux.org/viewtopic.php?id=7482][here]]
- edit /etc/pam.d/sudo and set the following as the 1st line to allow wheel group to use sudo with no password :
#+BEGIN_SRC sh
auth           sufficient      pam_wheel.so trust use_uid
#+END_SRC

* X
  - had to install xorg and xorg-xinit
* terminal
  - install xst-git from AUR
* bspwm
  - pacman -S bspwm sxhkd dmenu
  - install pulse audio
  - pacaur -S xst
* audio
  - install pulse audio, alsa, etc...
  - install alsamixer
  - install pavucontrol and tweak settings and umute things
  - pavucontrol is actually the volume slider
* github
** generate ssh-key

- stolen from [[http://www.w3docs.com/snippets/git/how-to-generate-ssh-key-for-git.html][here]]
#+BEGIN_SRC sh
# generate key
ssh-keygen -t rsa -b 4096 -C "[your github's email]" # then enter, enter, enter

# start ssh-agent
eval "$(ssh-agent -s)"
> Agent pid 59566

# add key to ssh-agent
ssh-add ~/.ssh/id_rsa

# add key to github
cat .ssh/id_rsa.pub
#+END_SRC
* bspwm
** set brightness
- just put this in your sxkhdrc:
#+BEGIN_SRC
XF86MonBrightnessUp
    xbacklight -inc 10
XF86MonBrightnessDown
    xbacklight -dec 10
#+END_SRC
* battery life
  - =pacman -S acpi; acpi -V=
  - tlp stat
* hdmi
** video
   - just use xrandr
   - =xrandr --output HDMI2 --auto=
** audio
   - just use pavucontrol
* pendrives and usb sticks management
  - use =udisksctl= and =udiskie=
  - place udiskie & on =~/.xinitrc= for maximum comfort
* beep infernal
  - taken from [[https://wiki.archlinux.org/index.php/PC_speaker][here]]
  #+BEGIN_SRC sh
    echo "blacklist pcspkr" > /etc/modprobe.d/nobeep.conf
  #+END_SRC
* screenshots

#+BEGIN_SRC sh
$ pacman -S maim
$ maim screenshot.png
$ maim -d 5 screenshot.png # pause for 5 seconds
$ maim -s shot.png # select an area, or window (just click on the window)
$ man maim # for more options
#+END_SRC
* screen locker
** physlock from aur
* pdf reader
  - zathura or evince
* video
  - mpv
* font management
** font/char viewer (fontawesome, nerdfonts, material icons, etc...)
   - tip from [[https://redd.it/6l3ivb][here]]
   - pacman -S =gucharmap=
** viewing available fonts
   - =$ fc-list=
* julicloud | wdmycloudx2 | nfs
  1. export the share as NFS
  2. showmount -e server
  3. =sudo mount server:/path/of/the/mount /mnt/mountpoint=
* mpd + ncmpcpp
  - pacman -S mpd ncmpcpp
  - ncmpcpp [[https://wiki.archlinux.org/index.php/Ncmpcpp][arch wiki]]
  - mpd [[https://wiki.archlinux.org/index.php/Music_Player_Daemon][arch wiki]]
* gpg and pass
- [[https://superuser.com/questions/813421/can-you-extend-the-expiration-date-of-an-already-expired-gpg-key/814663#814663][extend the expiration date of an already expired key]]
* video recording
  - [[https://wiki.archlinux.org/%209.php/FFmpeg#Package_installation][ffmpeg]]
* caveats, pitfalls and traps
  - don't install =ibus=. If you do that, inkscape and visual studio code will not work, among other things.